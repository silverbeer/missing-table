[pytest]
# Pytest configuration for Playwright E2E tests
minversion = 8.0

# Test discovery
python_files = test_*.py
python_classes = Test*
python_functions = test_*
testpaths = .

# Pytest options
addopts =
    --verbose
    --strict-markers
    --tb=short
    --browser chromium
    --headed
    --slowmo 100
    --video retain-on-failure
    --screenshot only-on-failure
    --tracing retain-on-failure
    --output ./test-results
    --html=./test-results/report.html
    --self-contained-html

# Custom markers for Playwright tests
markers =
    smoke: Quick smoke tests for critical paths
    regression: Full regression test suite
    visual: Visual regression tests with screenshots
    auth: Authentication and authorization tests
    navigation: Navigation and routing tests
    forms: Form submission and validation tests
    api_integration: Tests that verify frontend-backend integration
    data_driven: Tests using parametrize with multiple data sets
    slow: Tests that take longer than 5 seconds
    critical: Critical user journeys that must always pass
    chromium_only: Tests that only run on Chromium
    firefox_only: Tests that only run on Firefox
    webkit_only: Tests that only run on WebKit
    anonymous: Tests for unauthenticated users
    authenticated: Tests requiring any authenticated user
    admin: Tests requiring admin role
    team_manager: Tests requiring team manager role
    standings: League standings feature tests
    matches: Match schedule and results tests
    admin_panel: Admin panel functionality tests
    user_profile: User profile management tests
    clubs: Club and team management tests
    security: Security-related tests
    filters: Filter functionality tests
    error_handling: Error handling and validation tests
    a11y: Accessibility tests
    responsive: Responsive design tests

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = ./test-results/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s:%(lineno)d - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Warning configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
