# Social Media Handle Validation Test Specification
# Business Rule: Handles max 30 chars, alphanumeric + underscore + period only
# Source: backend/models/auth.py - PlayerCustomization.validate_social_handle
#
# For qualityplaybook.dev: Demonstrates validator that strips @ prefix.

model: PlayerCustomization
field: instagram_handle
validator: validate_social_handle
description: |
  Validates social media handle format.
  - Maximum 30 characters
  - Letters, numbers, underscores, and periods only
  - @ prefix is stripped if present

valid_cases:
  - input: "player_23"
    expected: "player_23"
    description: "Standard handle with underscore"

  - input: "@player_23"
    expected: "player_23"
    description: "@ prefix is stripped"

  - input: "john.doe"
    expected: "john.doe"
    description: "Period is allowed"

  - input: "a"
    expected: "a"
    description: "Single character is valid"

  - input: "abcdefghijklmnopqrstuvwxyz1234"
    expected: "abcdefghijklmnopqrstuvwxyz1234"
    description: "Exactly 30 characters (maximum)"

  - input: null
    expected: null
    description: "None is allowed (optional)"

  - input: "___"
    expected: "___"
    description: "All underscores"

  - input: "..."
    expected: "..."
    description: "All periods"

  - input: "user.name_123"
    expected: "user.name_123"
    description: "Mix of periods, underscores, and numbers"

  - input: "@@@stripped"
    expected: "stripped"
    description: "Multiple @ symbols stripped"

  - input: "CamelCaseHandle"
    expected: "CamelCaseHandle"
    description: "Mixed case preserved"

invalid_cases:
  - input: "abcdefghijklmnopqrstuvwxyz12345"
    error_contains: "30 characters"
    description: "31 characters exceeds maximum"

  - input: "player@name"
    error_contains: "letters, numbers, underscores, and periods"
    description: "@ in middle not allowed"

  - input: "player name"
    error_contains: "letters, numbers, underscores, and periods"
    description: "Spaces not allowed"

  - input: "player-name"
    error_contains: "letters, numbers, underscores, and periods"
    description: "Hyphens not allowed"

  - input: "player#name"
    error_contains: "letters, numbers, underscores, and periods"
    description: "Hash symbol not allowed"

  - input: "player!name"
    error_contains: "letters, numbers, underscores, and periods"
    description: "Exclamation not allowed"
