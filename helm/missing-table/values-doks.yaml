# DOKS environment configuration
# Non-sensitive values only - secrets come from GitHub Actions

namespace: missing-table

backend:
  replicaCount: 1

  image:
    repository: ghcr.io/silverbeer/missing-table-backend
    tag: latest
    pullPolicy: Always

frontend:
  replicaCount: 1

  image:
    repository: ghcr.io/silverbeer/missing-table-frontend
    tag: latest
    pullPolicy: Always

  # Webpack dev server takes ~90s to build on startup
  livenessProbe:
    initialDelaySeconds: 120
    periodSeconds: 10
  readinessProbe:
    initialDelaySeconds: 90
    periodSeconds: 5

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  hosts:
    - missingtable.com
  tls:
    - secretName: missing-table-tls  #pragma: allowlist secret
      hosts:
        - missingtable.com

imageCredentials:
  registry: ghcr.io
  username: silverbeer
  # password will come from --set
