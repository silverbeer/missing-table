{{- if .Values.secrets }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "missing-table.fullname" . }}-secrets
  namespace: {{ .Values.namespace }}
  labels:
    app.kubernetes.io/name: {{ include "missing-table.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
type: Opaque
stringData:
  # Database credentials
  database-url: {{ .Values.secrets.databaseUrl | quote }}

  # Supabase credentials
  supabase-url: {{ .Values.secrets.supabaseUrl | quote }}
  supabase-anon-key: {{ .Values.secrets.supabaseAnonKey | quote }}
  supabase-service-key: {{ .Values.secrets.supabaseServiceKey | quote }}
  supabase-jwt-secret: {{ .Values.secrets.supabaseJwtSecret | quote }}

  # Application secrets
  service-account-secret: {{ .Values.secrets.serviceAccountSecret | quote }}
{{- end }}
